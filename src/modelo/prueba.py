#!/usr/bin/python3
# -*- encoding: utf-8 -*-

from src.modelo.conexion import ConexionDB

class Prueba(object):

    def __init__(self, id=0, codigo=None, nombre=None, descripcion=None, impacto=None, id_subcategoria=0):
        self.id = id
        self.codigo = codigo
        self.nombre = nombre
        self.descripcion = descripcion
        self.objetivo = descripcion
        self.id_subcategoria = id_subcategoria
    
    def getByCodigo(self, codigo):
        conn = ConexionDB()
        cur = conn.conn.cursor()

        query = "SELECT id, codigo, nombre, descripcion, objetivo, id_subcategoria FROM prueba WHERE codigo = %s"
        cur.execute(query, (codigo,))
        row = cur.fetchone()
        
        cur.close()
        conn.desconectar()
        if row is not None:
            return Prueba(row[0], row[1], row[2], row[3], row[4], row[5])
        else: return None
    
    def getLikelihood(self, codigo):
        conn = ConexionDB()
        cur = conn.conn.cursor()

        query = "SELECT riesgo_probabilidad FROM prueba WHERE codigo = %s"
        cur.execute(query, (codigo,))
        row = cur.fetchone()
        
        cur.close()
        conn.desconectar()

        return row

    def getTechImpact(self, codigo):
        conn = ConexionDB()
        cur = conn.conn.cursor()

        query = "SELECT riesgo_imptecnico FROM prueba WHERE codigo = %s"
        cur.execute(query, (codigo,))
        row = cur.fetchone()
        
        cur.close()
        conn.desconectar()

        return row
