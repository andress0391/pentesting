#!/usr/env/ python
# -*- encoding: utf-8 -*-

import os
import multiprocessing
from fabrica.info import Info

class Info_010(Info):
    def __init__(self, url):
        self.url = url
        self.salida = "/src/Salida/"
        self.complejidad = 3

    def scanner(self, command, nombreSalida):
        os.system("%s %s > %s" % (command, self.url, os.getcwd()+self.salida+nombreSalida))
       
    def main(self):
        jobs = []
        tareas = {"nmap -f --mtu 24 ":"info_010_pscan.txt",
                    "nmap -f --mtu 24 -A ":"info_010_infra.txt",
                    "nmap -f -Pn --script discovery ":"info_010_server.txt"}
        tamTareas = len(tareas)
        i = 0
        for i in range(tamTareas):
            p = multiprocessing.Process(target=self.scanner, args=(list(tareas.keys())[i], list(tareas.values())[i],))
            jobs.append(p)
            p.start()
            p.join()

#a = Info_010("10.200.1.16")
#a.main()